!function(p,t,e,n){"use strict";var a="simpleCalendar",i={months:["january","february","march","april","may","june","july","august","september","october","november","december"],days:["sunday","monday","tuesday","wenesday","thursday","friday","saturday"],displayYear:!0,fixedStartDay:!0,displayEvent:!0,events:[],onInit:function(t){},onMonthChange:function(t,e){}};function s(t,e){this.element=t,this.settings=p.extend({},i,e),this._defaults=i,this._name=a,this.currentDate=new Date,this.init()}p.extend(s.prototype,{init:function(){var t=p(this.element),e=this.currentDate,n=p('<div class="calendar"></div>'),a=p('<header><h2 class="month"></h2><a class="btn btn-prev" href="#"></a><a class="btn btn-next" href="#"></a></header>');this.updateHeader(e,a),n.append(a),this.buildCalendar(e,n),t.append(n),this.bindEvents(),this.settings.onInit(this)},updateHeader:function(t,e){var n=this.settings.months[t.getMonth()];n+=this.settings.displayYear?' <div class="year">'+t.getFullYear():"</div>",e.find(".month").html(n)},buildCalendar:function(t,e){var n=this;e.find("table").remove();for(var a=p("<table></table>"),i=p("<thead></thead>"),s=p("<tbody></tbody>"),r=1;r<=this.settings.days.length;r++)i.append(p("<td>"+this.settings.days[r%7].substring(0,3)+"</td>"));for(var d=t.getFullYear(),h=t.getMonth(),o=new Date(d,h,1);1!=o.getDay();)o.setDate(o.getDate()-1);for(var u=new Date(d,h+1,0);0!=u.getDay();)u.setDate(u.getDate()+1);for(var c=o;c<=u;c.setDate(c.getDate())){var l=p("<tr></tr>");for(r=0;r<7;r++){var f=p('<td><div class="day">'+c.getDate()+"</div></td>");c.toDateString()===(new Date).toDateString()&&f.find(".day").addClass("today"),c.getMonth()!=t.getMonth()&&f.find(".day").addClass("wrong-month"),n.settings.events.filter(function(t){return n.isDayBetween(c,new Date(t.startDate),new Date(t.endDate))}).length&&n.settings.displayEvent&&f.find(".day").addClass("has-event"),f.on("click",function(t){n.fillUp(p(n.element),t.pageX,t.pageY)}),l.append(f),c.setDate(c.getDate()+1)}s.append(l)}a.append(i),a.append(s);var g=p('<div class="event-container"></div>');e.append(a),e.append(g)},changeMonth:function(t){this.currentDate.setMonth(this.currentDate.getMonth()+t),this.buildCalendar(this.currentDate,p(".calendar")),this.updateHeader(this.currentDate,p(".calendar header")),this.settings.onMonthChange(this.currentDate.getMonth(),this.currentDate.getFullYear())},bindEvents:function(){var t=this;p(".btn-prev").click(function(){t.changeMonth(-1)}),p(".btn-next").click(function(){t.changeMonth(1)})},fillUp:function(t,e,n){var a=t.offset(),i=p('<div class="filler" style=""></div>');i.css("left",e-a.left),i.css("top",n-a.top),p(".calendar").append(i),i.animate({width:"300%",height:"300%"},500,function(){p(".event-container").show(),i.hide()})},empty:function(t,e,n){t.offset();var a=p(".filler");a.css("width","300%"),a.css("height","300%"),a.show(),p(".event-container").hide(),a.animate({width:"0%",height:"0%"},500,function(){a.remove()})},isDayBetween:function(t,e,n){return this.getDayNumber(e)<=this.getDayNumber(t)&&this.getDayNumber(t)<=this.getDayNumber(n)},getDayNumber:function(t){return Math.round(t/864e5)}}),p.fn[a]=function(t){return this.each(function(){p.data(this,"plugin_"+a)||p.data(this,"plugin_"+a,new s(this,t))})}}(jQuery,window,document);